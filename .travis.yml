language: node_js
jobs:
  include:
    - stage: test
      if: type = pull_request AND branch = develop
      node_js: 6
      script:  
        - |
          npm run lint
    - stage: deploy
      if: type = push AND branch = develop
      node_js: 6
      script:  
        - |
          chmod +x deploy.sh
          ./deploy.sh
    - stage: deploy
      provider: npm
      email: "bill@portal.network"
      api_key:
        secure: ${NPM_API_KEY}
      on:
        branch: master